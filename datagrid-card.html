<link rel="import" href="../polymer/polymer.html" />
<link rel="import" href="../px-card/px-card.html" />
<link rel="import" href="../px-data-table/px-data-table.html" />

<dom-module id="datagrid-card">
  <template>
    <px-card icon="fa-table" header-text="Datagrid">
      <px-data-table filterable selectable table-data="{{data}}"></px-data-table>
      <p>This demo will not work outside of an Angular application at this time, since the getData
      method is only implemented for Angular $http. In an Angular application, the card can get a url from the context (this.context.url) and
      then fetch data from that url.</p>
    </px-card>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'datagrid-card',
    init: function() {
      /**
       * get data url from context property therefore this card can be resuable
       */
      var self = this;
      if (this.context.urls && this.context.urls['datagrid-data']){
          this.getData(this.context.urls['datagrid-data']).then(function (data) {
              self.data = data;
          });
      }
    },
    behaviors: [px.card]
  });
</script>
